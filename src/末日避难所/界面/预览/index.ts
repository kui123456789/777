import { createPinia, defineStore } from 'pinia';
import { createApp, ref } from 'vue';
import type { Schema } from '../../schema';
import App from './App.vue';
import './global.css';

// 预览用模拟数据
const mockData: Schema = {
  世界: {
    当前日期: '2077年10月24日',
    当前时间: '08:00',
    灾难本质: '核战',
    世界现状: '核弹落下后的第一个黎明，地表被死灰覆盖',
    时间线节点: '爆发后的一年',
  },
  避难所: {
    避难所名称: 'Vault-101',
    基础生存资源: {
      电力: { 当前值: 65, 上限: 100 },
      水源: { 当前值: 50, 上限: 100 },
      食物: { 当前值: 18, 上限: 100 },
      人口: { 当前值: 42, 上限: 100 },
    },
    环境指标: {
      科技等级: '工业时代',
      卫生度: 55,
      精神健康度: 45,
    },
    社会制度: {
      分配方法: 50,
      信息管控: 50,
      社会伦理: 50,
      治安手段: 50,
    },
    宏观属性: {
      统治力: 60,
      防御等级: 15,
      隐蔽度: 70,
      隐藏目的: '无',
      秘密实验进度: 0,
    },
  },
  派系: {
    技术派: { 宗旨: '科技是人类重建文明的唯一希望', 好感度: 15, 观感: '中立偏好', 领导人: '陈博士', 人数占比: 20 },
    生存派: { 宗旨: '活下去才是第一要务', 好感度: 10, 观感: '中立', 领导人: '老王', 人数占比: 35 },
    秩序派: {
      宗旨: '严格的纪律和等级制度是维持避难所运转的基石',
      好感度: -25,
      观感: '不满',
      领导人: '李队长',
      人数占比: 25,
    },
    自由派: { 宗旨: '即使在末日，人的尊严和自由也不应被剥夺', 好感度: 55, 观感: '友好', 领导人: '小张', 人数占比: 20 },
  },
  设施与库存: {
    设施区域: {
      发电室: { 等级: 2, 效果: '每日产出电力+15', 说明: '核聚变发电机组', 状态: '正常' },
      水净化室: { 等级: 1, 效果: '每日产出净水+10', 说明: '基础净水设施', 状态: '正常' },
      食物生产区: { 等级: 1, 效果: '每日产出食物+12', 说明: '水培农场', 状态: '升级中' },
      医疗室: { 等级: 1, 效果: '恢复生命值+5', 说明: '基础医疗设施', 状态: '损坏' },
    },
    仓库系统: {
      应急口粮: { 类型: '消耗品', 效果: '恢复食物+20', 说明: '军用口粮', 数量: 3 },
      医疗包: { 类型: '消耗品', 效果: '恢复生命值30', 说明: '急救包', 数量: 5 },
      '10mm手枪': { 类型: '武器', 效果: '武力+2', 说明: '标准配发', 数量: 3 },
      防护服: { 类型: '防具', 效果: '防护+5', 说明: '抗辐射服', 数量: 2 },
    },
  },
  监督者: {
    姓名: '监督者',
    当前位置: '监督者办公室',
    行动点数: 2,
    行动点数上限: 3,
    SPECIAL: { 威慑力: 5, 洞察力: 6, 抗压值: 5, 统御力: 7, 科研力: 5, 反应力: 5, 气运: 4 },
    特质: { 天生领袖: { 效果: '统御力检定+1' } },
  },
  追随者: {
    scout_001: {
      姓名: '林小队',
      年龄: 26,
      性别: '女',
      武力: 35,
      管理: 15,
      探索生存: 55,
      生命值: 100,
      防护等级: 5,
      状态: '健康',
      忠诚度: 65,
      装备栏: { 武器位: '10mm手枪', 防具位: '防护服', 饰品工具位: '望远镜' },
      特质: { 废土向导: { 效果: '探索时间-25%' } },
      描述: '废土侦察员',
    },
    engineer_001: {
      姓名: '老周',
      年龄: 45,
      性别: '男',
      武力: 15,
      管理: 40,
      探索生存: 20,
      生命值: 85,
      防护等级: 0,
      状态: '生病',
      忠诚度: 70,
      装备栏: { 武器位: '空', 防具位: '工作服', 饰品工具位: '工具箱' },
      特质: { 机械大师: { 效果: '维修效率+50%' } },
      描述: '退休工程师',
    },
  },
  $社会Buff: [],
  $资源警告: ['食物紧缺'],
  $气运加成: 1,
};

// 创建模拟 store
export const useDataStore = defineStore('data', () => {
  const data = ref<Schema>(mockData);
  return { data };
});

// 直接挂载
$(() => {
  createApp(App).use(createPinia()).mount('#app');
});
