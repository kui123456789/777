const t='末日避难所';async function o(){try{console.info(`[世界书同步] 正在导入世界书: ${t}...`);const o=await fetch('http://localhost:5500/src/末日避难所/世界书/末日避难所.json');if(!o.ok)throw new Error(`加载世界书失败: ${o.status} ${o.statusText}`);const n=await o.json(),e=Object.keys(n.entries||{}).length,s=window.parent.SillyTavern.getContext();return await s.saveWorldInfo(t,n,!0),await s.updateWorldInfoList(),console.info(`[世界书同步] 世界书已同步，共 ${e} 个条目`),toastr.success(`世界书 "${t}" 已同步 (${e} 条目)`,'世界书同步'),!0}catch(t){return console.error('[世界书同步] 同步失败:',t),toastr.error(`同步失败: ${t instanceof Error?t.message:t}`,'世界书同步'),!1}}eventOn(getButtonEvent('同步世界书'),async()=>{await o()}),$(()=>{console.info('[世界书同步] 脚本已加载'),o()});
//# sourceMappingURL=index.js.map